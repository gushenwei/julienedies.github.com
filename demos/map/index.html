<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="js/jquery-1.7.1.js"></script>
<script src="js/jquery.ui.core.js"></script>
<script src="js/jquery.ui.widget.js"></script>
<script src="js/jquery.ui.mouse.js"></script>
<script src="js/jquery.ui.draggable.js"></script>
<script src="js/jquery.mousewheel.min.js"></script>
<script src="js/jquery.easing.min.js"></script>
<style>
body {
    margin:0;
    padding:0;
	overflow:hidden;
}
#view {
	position:absolute;
    width: 3100px;
    height: 3100px;
	background: -webkit-linear-gradient(top,  #ededec 0%,#f2f2f2 52%,#dedede 100%); /* Chrome10+,Safari5.1+ */
	-webkit-transition:all 0.3s ease;
}
.bg_1{
	background:#ededec;
}
.bg_2{
	background:#dedede;
}
.k{
	margin:1px 0 0 1px;
	background:rgb(210, 210, 210);
	width:200px;
	height:200px;
	position:absolute;
}
</style>
</head>
<body>
	
<div id="view">
	
</div>

<script>
	
	//获取视口面积，用以填充数据
	var $view = $('#view');
	
	
	var scale = 1;
	
    var vw = $view.width();
    var vh = $view.height();
    var dw = 200;
    var dh = 200;
    
    var len = vw * vh / dw * dh;
    
    var lw = Math.floor(vw / dw);
    var lh = Math.floor(vh / dh);
	
	
	
	
	var full = function(lh,lw,dw,dh){
		var html = '';
        for (var i = 0; i < lh; i++) {
            for (var j = 0; j < lw; j++) {
                html += '<div class="k" style="left:' + i * (dw>0?dw+1:dw-1) + 'px;top:' + j * (dh>0?dh+1:dh-1) + 'px;" id="k' + i + '' + j + '" >' + i + '' + j + '</div>';
            }
        }
		return html;		
	};
	
	
    var init = function(){
		
		$view.append(full(lh,lw,dw,dh));
		
        $(window).mousewheel(function(event, delta, deltaX, deltaY){
			console.log(delta);
			console.log(scale);
			scale  += delta*0.1;
			scale > 3 && (scale = 3);
			scale < 0.1 && (scale = 0.1);
			
			console.log(scale);
            //$('body').css({'-webkit-transform':'scale(' + scale + ')'});
        });
        
        $view.draggable({
            start: function(){
            },
            drag: function(){
            },
            stop: function(){
                var $th = $(this);
                var position = $th.position();
                var left = position.left;
                var top = position.top;
				var lw1 = Math.ceil(left/dw)+2;
				var lh1 = Math.ceil(top/dh)+2;
                if (left > 0 && top > 0) {
					$view.append(full(lw1,lh,-dw,-dh));
                }				
                if (left > 0) {
					$view.append(full(lw1,lh,-dw,dh));
                }
                if (top > 0) {
                	$view.append(full(lw,lh1,dw,-dh));
                }
            }
        });
    };
	


	init();
	
</script>
</body>
</html>