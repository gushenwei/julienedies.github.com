<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>可视化</title>
<link href="assets/css/style.css" rel="stylesheet" type="text/css" media="all" />
<link href="assets/css/visual.css" rel="stylesheet" type="text/css" media="all" />
<script src="assets/js/library/jquery.min.js" type="text/javascript"></script>
<script src="assets/js/library/d3.min.js" type="text/javascript"></script>
<script src="assets/js/library/template.js" type="text/javascript"></script>
<script src="assets/js/33.js" type="text/javascript"></script>
<script src="assets/js/help.js" type="text/javascript"></script>
<script src="assets/js/doc.js" type="text/javascript"></script>
<script src="assets/js/init.js" type="text/javascript"></script>
</head>
<body>
<aside>
<button data-type="upMarginRef">上间隔</button>
<button data-type="downMarginRef">下间隔</button>
<button data-type="singleDigitRef">数尾</button>
</aside>
<div class="container">
<div class="title"></div>
<div class="content visual"></div>
</div>

<script>
var data =[
[2,3,3,5,6,9],
[0,0,1,2,3,12],
[0,2,3,5,6,8],
[0,1,4,6,7,9],
[0,1,2,3,6,11],
[0,0,1,2,10,22],
[0,1,4,6,11,14],
[1,1,2,9,11,16],
[0,0,3,4,9,14],
[0,4,6,8,11,20],
[0,0,4,11,12,13],
[0,0,0,1,3,5],
[0,0,1,1,2,12],
[0,1,2,4,6,6],
[0,0,2,4,7,10],
[0,0,1,1,2,9],
[0,2,3,3,4,5],
[0,1,4,5,9,10],
[0,0,1,2,2,4],
[0,1,4,6,6,7],
[1,3,4,5,6,7],
[0,1,4,5,11,13],
[0,1,2,5,7,13],
[0,1,4,6,8,11],
[1,2,4,6,7,20],
[0,1,4,7,9,17],
[3,4,7,9,10,11],
[0,1,1,1,4,13],
[0,0,3,3,8,11],
[0,1,1,3,6,14],
[0,0,1,2,3,11],
[1,2,3,3,10,16],
[0,1,2,3,4,8],
[0,0,7,8,11,15],
[1,2,3,4,4,8],
[0,1,2,3,7,8],
[0,1,6,6,9,10],
[0,0,1,1,7,25],
[0,1,2,2,3,11],
[0,0,0,0,6,13],
[0,1,3,4,6,26],
[0,2,4,5,8,10],
[0,1,1,3,6,7],
[1,1,2,3,5,15],
[1,3,4,6,11,17],
[2,3,4,5,9,13],
[0,0,3,7,10,14],
[0,0,0,2,4,9],
[0,2,2,5,7,9],
[1,1,2,2,4,5],
[1,2,2,3,4,11],
[0,1,1,5,7,8],
[0,1,2,3,11,15],
[0,1,1,3,12,17],
[1,2,3,3,6,8],
[0,0,2,2,4,7],
[0,2,2,8,12,13],
[0,4,7,12,13,13],
[0,1,2,5,6,16],
[0,0,0,1,2,2],
[0,0,1,2,9,9],
[1,1,2,2,5,11],
[1,1,2,3,6,17],
[1,1,2,2,3,3],
[1,2,3,5,6,10],
[0,1,2,2,3,7],
[1,2,7,11,13,20],
[0,1,4,4,6,9],
[0,2,3,8,9,15],
[0,1,2,3,4,9],
[1,4,4,6,8,9],
[0,1,1,1,2,7],
[1,4,5,6,8,11],
[0,1,3,4,5,10],
[0,1,5,7,13,35],
[0,0,0,0,0,5],
[0,2,4,6,9,12],
[0,0,4,15,22,32],
[1,2,3,4,6,17],
[0,2,2,3,4,6],
[0,0,2,9,11,40],
[0,1,3,3,5,13],
[0,1,1,3,3,11],
[1,3,3,3,5,7],
[0,0,3,3,5,15],
[0,0,2,3,5,13],
[0,1,2,2,3,15],
[0,1,3,5,5,12],
[1,1,2,3,5,22],
[0,1,2,2,6,6],
[0,2,2,3,5,17],
[0,0,2,5,6,6],
[0,1,1,4,5,6],
[1,1,2,3,3,5],
[0,0,0,2,2,6],
[0,5,7,7,9,12],
[1,2,3,6,10,23],
[0,0,2,4,5,27],
[0,0,1,5,8,16],
[1,1,1,2,4,28],
[0,1,3,3,3,5],
[0,0,5,8,8,16],
[0,0,2,6,8,15],
[0,2,2,5,6,8],
[0,0,0,0,3,5],
[0,0,0,1,2,17],
[0,0,1,2,5,5],
[0,1,3,3,6,16],
[0,0,3,4,5,7],
[2,3,4,5,5,23],
[0,0,1,3,6,13],
[1,2,4,5,7,10],
[0,0,0,3,7,9],
[0,1,1,5,5,6],
[0,1,2,2,4,14],
[0,0,1,2,2,15],
[0,2,3,6,13,17],
[0,0,4,4,5,7],
[0,2,2,7,7,23],
[0,0,1,3,4,5],
[0,0,1,1,3,7],
[1,3,3,4,5,8],
[0,1,3,4,6,15],
[0,2,5,7,10,16],
[0,2,3,8,12,13],
[0,1,1,2,2,4],
[0,2,2,4,4,19],
[0,2,2,3,4,10],
[0,1,2,6,10,15],
[3,4,5,7,10,15],
[1,1,1,2,4,4],
[0,0,2,4,6,9],
[0,0,2,5,6,6],
[0,0,1,2,2,5],
[1,1,5,5,6,13],
[0,1,5,6,8,12],
[0,0,0,6,7,9],
[0,2,6,6,8,12],
[0,0,2,3,4,6],
[0,1,1,2,4,9],
[2,2,4,4,9,10],
[0,0,3,5,5,7],
[0,0,2,4,5,12],
[2,3,9,10,11,17],
[1,2,5,7,8,10],
[0,2,2,4,6,8],
[0,1,2,2,3,21],
[3,3,4,9,11,12],
[0,0,1,2,6,7],
[1,1,4,7,7,20],
[1,1,2,3,3,5],
[0,1,1,3,4,9],
[0,2,3,5,7,11],
[0,2,3,3,5,6],
[3,3,4,6,7,7],
[0,1,2,2,3,7],
[1,3,3,4,8,13],
[1,4,4,7,7,9],
[0,1,3,4,7,14],
[1,3,6,7,9],	
[0,1,3,10],
[1,2,2,5,6],
[0,0,1,1,2,4],
[1,2,4,5,8],
[0,1,1,3,5,7],
[0,1,2,3,8],
[0,2,2,4,5],
[0,2,2,5,6,6],
[0,2,2,3],
[0,1,1,2,3],
[2,2,4,4,4,4],
[0,1,4],
[1,1,2],
[0,2],
[0,1,1],
[0,0]
];
	var view = function(data) {
		
		var m = 40;
		var h = 20;
		
		//////////////////////////////////////////////////
		var i = d3.select('.title').selectAll('i')
		.data(d3.range(0, 36));
		
		i.enter()
		.append('i');
		
		i.text(function(d) {
					return d;
				})
		.style('left', function(d) {
					return (d) * m + (d + 1) * 1 + 'px';
				});

		
		//////////////////////////////////////////////////
		var p = d3.select(".content").selectAll("p")
		.data(data);
		
		p.enter()
		.append("p");

		p.exit().remove();
		
		//////////////////////////////////////////////////
		var em = p.selectAll('em')
		.data(function(d) {
			return d;
		});
		
		em.enter().append("em");
		
		em.text(function(d) {
			return d[0];
		})
		.transition().duration(500)
		.style('left', function(d) {
			return d[0] * m + (d[0]*1 + 1) * 1 + 'px';
		});
		
		em.each(function(d,i){
			if(d[1] > 1){
				this.classList.add('red');
			}else{
				this.classList.remove('red');
			}
		});
		
		em.exit().remove();
	};
	
	
	
	////////////////////////////////////////////
	//init
	
	$('aside button').click(function(){
		var th = $(this);
		var type = th.attr('data-type');
		var data = window[type].slice(-28);
		
		th.addClass('current');
		th.siblings().removeClass('current');
		
		$('title').text('可视化'+type);
		
		$.each(data,function(i,v){
			data[i] = getArrUniqueSize(v);
		});
		view(data);		
	});
	
	

	var type = getUrlParam('type') || 'upMarginRef';
	var push = getUrlParam('push');

	//var data = window[type].slice(-28);
	
	if(push){
		data.push(JSON.parse(push));
	}
	
	$.each(data,function(i,v){
		data[i] = getArrUniqueSize(v);
	});	

	view(data);
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</script>
</body>
</html>
