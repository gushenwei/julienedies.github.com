<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>33</title>
<link href="back/style.css" rel="stylesheet" type="text/css" media="all">
<script src="back/jquery.min.js" type="text/javascript"></script>
<script src="back/template.js" type="text/javascript"></script>
<script src="back/33.js" type="text/javascript"></script>
<script src="back/help.js" type="text/javascript"></script>
<script src="back/doc.js" type="text/javascript"></script>

  <!-- template
  	================================================== 
    ================================================== -->
     <script id="groupListTemp" type="text/html">
		<div id="groupListBox">
		<a href="#" id="groupListInfo2">X</a>
        <ol id="groupList2">
                <% 
					for (var i in list) { var item = list[i];
				 %>
                <li data="<%= item.join(' '); %>">
					<input type="checkbox" name="" />&nbsp;<span> <%= item.join('&nbsp; '); %> </span>
                </li>
                <% } %>
        </ol>
	</div>
    </script>  
       
<script id="listItemTemp" type="text/html">
    <% for (var i in list) { var obj = list[i]; %>
        <li class="<%= className || '' %>">
				<% for (var j in obj) { var item = obj[j] %>
                		<p class="<%= j %>" >
							<% for (var k in item) {  %>
									<b><%=item[k]%></b>
							<%}%>
                		</p>
				<%}%>
		</li>
    <%}%>
</script>

<script id="listTemp" type="text/html">
        <ul id="<%= id || '' %>" >
			<% include('listItemTemp') %>
        </ul>
</script>

<!-- template
  	================================================== 
    ================================================== -->
</head>
<body>

<div id="box">

<ul id=""></ul>
<div id="console">
<button id="choice">选择</button>
<br />
<br />
<button id="del">删除所选</button>
<br />
<br />
<button id="show">显示细节</button>
<br />
<br />
<span id="info"></span>
<br />
<br />
<pre>
</pre>
</div>

</div>

<script>


	window.classifyByIndex = 2;
	
	
	//classifyByDownMarginLocaMap = {"1":[0,1,2,4],"2":[3,5],"3":[7,8,9,10,12,13,14,18]};
	classifyByDownMarginLocaMap = {"1":[0,1,2,4],"2":[3],"3":[9,10]};
	classifyBySingleDigitLocaMap = {"1":[3,4,7,9],"2":[2,5,6,8],"3":[0,1]}; 	
	
	window.refList = window[ refMap[classifyByIndex] ];
	window.classifyList = window[ classifyBy[classifyByIndex] ];
	
	//var groupScheme = [ 1,1, 2,3,3 ];
	//q = combineWrap(window.classifyList,groupScheme);
	
	
	
	var groupnum = [7,1,2,9,18];

	//window.patch = [ 0 ];

	q = group(groupnum, 5);
	
	
	q = groupWrap(q);


	$( template('groupListTemp',{list:q}) ).appendTo('body');
	$('#groupListInfo2').html(q.length);
	
	
	////////////////////////////////////////////////////////////////////////////////////
	//参照列表
	
	
	q = refListModel(refList);
	
	$( template('listTemp', {list: q, id: 'refList'}) ).appendTo('body');
	

	////////////////////////////////////////////////////////////////////////////////////
	
	
	
	
	
	
	
	
	
	
	
	
	
	
////////////////////////////////////////////////////////////////////////////////////
//事件绑定
////////////////////////////////////////////////////////////////////////////////////	
	
	$('body')
	//
	.delegate('#del','click',function() {
		$('input:checked').each(function() {
			$(this).closest('li').remove();
		});
		//$('#info').html($('#list').find('li').length);
	})
	//
	.delegate('li', 'click', function() {
		var $th = $(this);
		
		var input = $th.find('input:checkbox');

		if (input.attr('checked')) {
			input.attr('checked', false);
		} else {
			input.attr('checked', true);
		}

	})
	//
	.delegate('#groupList2 li', 'mouseover', function() {
		var $th = $(this);
		var str = $th.attr('data');
		var arr = str.split(' ');
		
		var str2 = $('#refList li:last p.refItem').text();
		str2 = $.trim(str2);
		var arr2 = str2.split(/\s+/);
		
		var locaMap = locaCompare(arr2,arr);
		var list = [];
		var obj = {
				refItem: arr,
				locaMap: locaMap
		};
		
		list.push(obj);
		$( template('listItemTemp',{list: list, className: 'ls'}) ).appendTo('#refList');
	})

	.delegate('#groupList2 li', 'mouseout', function() {
		var $th = $(this);
		$('#refList li.ls:last').remove();
	});	
	
	
	
	
	
	
	
	
</script>
</body>
</html>
